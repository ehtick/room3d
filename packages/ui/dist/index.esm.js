/**
    * @x-viewer/ui v0.8.0 build Sat Nov 08 2025
    * undefined
    * Copyright 2025 x-viewer
    * @license MIT
    */
import { THREE } from '@x-viewer/core';

function styleInject(_0x179295,_0x5e6973){if(_0x5e6973===void 0x0)_0x5e6973={};var _0x109b4b=_0x5e6973['insertAt'];if(!_0x179295||typeof document==='undefined')return;var _0x13be60=document['head']||document['getElementsByTagName']('head')[0x0],_0x52f64c=document['createElement']('style');_0x52f64c['type']='text/css',_0x109b4b==='top'?_0x13be60['firstChild']?_0x13be60['insertBefore'](_0x52f64c,_0x13be60['firstChild']):_0x13be60['appendChild'](_0x52f64c):_0x13be60['appendChild'](_0x52f64c),_0x52f64c['styleSheet']?_0x52f64c['styleSheet']['cssText']=_0x179295:_0x52f64c['appendChild'](document['createTextNode'](_0x179295));}

var css_248z$2 = ".base-panel{background-color:hsla(0,0%,100%,.9);border-radius:4px;box-shadow:1px 3px 10px 0 rgba(0,0,0,.4);color:#000;height:350px;max-height:90%;max-width:50%;min-height:40px;min-width:200px;overflow:hidden;position:absolute;resize:both;right:20px;top:30px;user-select:none;width:330px;z-index:2}.base-panel ::-webkit-scrollbar{width:6px}.base-panel ::-webkit-scrollbar-track{background:#e1e1e1;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb{background:#888;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb:hover{background:#555}.base-panel:hover{background-color:hsla(0,0%,100%,.95)}.base-panel input{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);height:auto;padding:0 2px;transition:all .2s cubic-bezier(.645,.045,.355,1)}.base-panel input:hover{border-color:#4096ff;color:#4096ff}.base-panel input[type=button]{cursor:pointer;height:auto;padding:1px 10px;text-align:center;user-select:none;white-space:nowrap}.base-panel input[type=button]:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel input[type=text]{padding:0 2px}.base-panel input[type=color]{background-color:transparent;border:0;height:16px;overflow:hidden;padding:0;width:30px}.base-panel select{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);cursor:pointer;height:auto;padding:1px 10px;text-align:center;transition:all .2s cubic-bezier(.645,.045,.355,1);user-select:none;white-space:nowrap}.base-panel select:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel ::-webkit-color-swatch{height:16px;margin-top:-5px;position:relative;width:40px}.base-panel .header{align-items:center;background-color:rgba(0,0,0,.133);border-bottom:1px solid #ccc;cursor:move;display:flex;font-size:16px;height:40px;padding-left:12px;width:100%}.base-panel .header .expander{cursor:pointer;font-family:cursive;opacity:.7;padding:10px;position:absolute;right:40px;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transition:transform .05s ease;-moz-transition:transform .05s ease;-webkit-transition:transform .05s ease;vertical-align:middle}.base-panel .header .expander:hover{opacity:1}.base-panel .header .expander-collapsed{transform:rotate(90deg);-webkit-transform:rotate(90deg)}.base-panel .header .close{cursor:pointer;opacity:.7;padding:10px;position:absolute;right:8px}.base-panel .header .close:hover{opacity:1}.base-panel .content{height:calc(100% - 40px);overflow-x:hidden;overflow-y:auto;padding:5px}.base-panel .content .color-input{border:1px solid gray;cursor:pointer;font-size:0;height:20px;width:20px}.base-panel .content .color-input:hover{border:1px solid blue}";
styleInject(css_248z$2);

var css_248z$1 = ".pop-panel{background:#fff;border-radius:4px;box-shadow:0 12px 48px 16px rgba(0,0,0,.03),0 9px 28px 0 rgba(0,0,0,.05),0 6px 16px -8px rgba(0,0,0,.08);color:#333;left:calc(90% - 160px);position:absolute;top:calc(70% - 100px);width:160px;z-index:99999999}.pop-panel .pop-panel-header{border-bottom:1px solid #efefef;color:#333;cursor:move;font-size:16px;font-weight:bolder;padding:16px 24px 8px;user-select:none}.pop-panel .pop-panel-body{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:16px 24px}.pop-panel .pop-panel-body .pop-panel-item{cursor:pointer;display:inline-block;font-size:16px;margin-right:16px}.pop-panel .pop-panel-body .pop-panel-item .x-viewer-iconfont{font-size:24px}.pop-panel .pop-panel-body .pop-panel-item:last-child{margin-right:0}.pop-panel .pop-panel-body .pop-panel-item.active,.pop-panel .pop-panel-body .pop-panel-item:hover{color:#2c7be5}.pop-panel .pop-panel-body .pop-panel-item.disable{color:#999;cursor:not-allowed}";
styleInject(css_248z$1);

class BasePanel{constructor(_0x4c060d){this['mouseDownPositionX']=-0x1,this['mouseDownPositionY']=-0x1,this['originalPanelHeight']=-0x1,this['onHide']=()=>{var _0x50fb4a;this['setVisible'](![]),(_0x50fb4a=this['onClose'])===null||_0x50fb4a===void 0x0?void 0x0:_0x50fb4a['call'](this);},this['onPointerDown']=_0x3036f2=>{_0x3036f2['target']['classList']['contains']('draggable')&&_0x3036f2['button']===0x0&&(this['mouseDownPositionX']=_0x3036f2['x'],this['mouseDownPositionY']=_0x3036f2['y'],document['addEventListener']('pointermove',this['onPointerMove']),document['addEventListener']('pointerup',this['onPointerUp']));},this['onPointerMove']=_0x2cd9d1=>{const _0x353299=this['root'],_0x4f3568=_0x2cd9d1['x']-this['mouseDownPositionX'],_0x85ce09=_0x2cd9d1['y']-this['mouseDownPositionY'],_0x599d05=this['getPanelTransform']();let _0x597e90=_0x353299['offsetLeft']+_0x599d05['x']+_0x4f3568,_0x526d87=_0x353299['offsetTop']+_0x599d05['y']+_0x85ce09;const _0x36b1e0=this['viewportContainer'];if(_0x36b1e0){const _0x2662b4=_0x36b1e0['clientLeft']+_0x36b1e0['clientWidth'],_0x2ff70f=_0x36b1e0['clientTop']+_0x36b1e0['clientHeight'];_0x597e90<0x0&&(_0x597e90=0x0),_0x597e90>0x0&&_0x597e90+_0x353299['clientWidth']>_0x2662b4&&(_0x4f3568>0x0&&(_0x597e90=_0x353299['offsetLeft']+_0x599d05['x'])),_0x526d87<0x0&&(_0x526d87=0x0),_0x526d87>0x0&&_0x526d87+_0x353299['clientHeight']>_0x2ff70f&&(_0x85ce09>0x0&&(_0x526d87=_0x353299['offsetTop']+_0x599d05['y']));}_0x353299['style']['left']=_0x597e90-_0x599d05['x']+'px',_0x353299['style']['top']=_0x526d87-_0x599d05['y']+'px',this['mouseDownPositionX']=_0x2cd9d1['x'],this['mouseDownPositionY']=_0x2cd9d1['y'];},this['onPointerUp']=()=>{document['removeEventListener']('pointermove',this['onPointerMove']),document['removeEventListener']('pointerup',this['onPointerUp']);};const {container:_0x49a0bb,title:_0x58eb9a,cssClass:_0x5440f2,onClose:_0x158152,viewportContainer:_0x4e6111}=_0x4c060d;this['root']=document['createElement']('div'),this['root']['classList']['add']('base-panel');_0x5440f2&&this['root']['classList']['add'](_0x5440f2);this['header']=document['createElement']('div'),this['header']['classList']['add']('header','draggable');const _0x5281e0=document['createElement']('span');_0x5281e0['innerText']=_0x58eb9a,_0x5281e0['classList']['add']('draggable'),this['closeBtn']=document['createElement']('span'),this['closeBtn']['classList']['add']('close'),this['closeBtn']['innerHTML']='âœ•',this['collapseBtn']=document['createElement']('span'),this['collapseBtn']['classList']['add']('expander'),this['collapseBtn']['innerHTML']='>',this['header']['appendChild'](_0x5281e0),this['header']['appendChild'](this['collapseBtn']),this['header']['appendChild'](this['closeBtn']),this['root']['appendChild'](this['header']),this['content']=document['createElement']('div'),this['content']['classList']['add']('content'),this['root']['appendChild'](this['content']),_0x49a0bb['appendChild'](this['root']),this['header']['addEventListener']('pointerdown',this['onPointerDown']),this['collapseBtn']['addEventListener']('click',_0x26eb46=>{_0x26eb46['stopPropagation']();const _0x1c15ef=this['originalPanelHeight']>0x0;_0x1c15ef?(this['collapseBtn']['classList']['remove']('expander-collapsed'),this['root']['style']['height']=this['originalPanelHeight']+'px',this['originalPanelHeight']=-0x1):(this['collapseBtn']['classList']['add']('expander-collapsed'),this['originalPanelHeight']=this['root']['clientHeight'],this['root']['style']['height']='0px');}),this['closeBtn']['addEventListener']('click',this['onHide']),_0x158152&&(this['onClose']=_0x158152),_0x4e6111&&(this['viewportContainer']=_0x4e6111);}['setVisible'](_0x4adaa1){this['root']['style']['display']=_0x4adaa1?'':'none';}['isVisible'](){return this['root']['style']['display']!=='none';}['setTitle'](_0x4a6e9a){this['header']['querySelector']('span.draggable')['innerText']=_0x4a6e9a;}['setContent'](_0x5440bf){this['content']['innerHTML']=_0x5440bf;}['destroy'](){this['header']['removeEventListener']('pointerdown',this['onPointerDown']),this['closeBtn']['removeEventListener']('click',this['onHide']);}['getPanelTransform'](){const _0x3953f9=window['getComputedStyle'](this['root']);let _0x59053f=0x0,_0xf21898=0x0;const _0xbf8ebc=_0x3953f9['transform'];if(_0xbf8ebc&&_0xbf8ebc['startsWith']('matrix')){const _0xd1b5c1=_0xbf8ebc['match'](/matrix\([^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+)\)/);_0xd1b5c1&&(_0x59053f=parseFloat(_0xd1b5c1[0x5]),_0xf21898=parseFloat(_0xd1b5c1[0x6]));}else {if(_0xbf8ebc&&_0xbf8ebc['startsWith']('translate')){const _0x1adbd3=_0xbf8ebc['match'](/translate\(([\d\.\-]+)px,\s*([\d\.\-]+)px\)/);_0x1adbd3&&(_0x59053f=parseFloat(_0x1adbd3[0x1]),_0xf21898=parseFloat(_0x1adbd3[0x2]));}}return new THREE['Vector2'](_0x59053f,_0xf21898);}}

class PopPanel{constructor(_0x5b2d71,_0x345834,_0x5655f8=document['body']){this['container']=_0x5655f8,this['isFollowing']=![],this['diffX']=0x0,this['diffY']=0x0,this['start']=_0x21fde7=>{this['isFollowing']=!![],this['diffX']=_0x21fde7['clientX']-this['element']['offsetLeft'],this['diffY']=_0x21fde7['clientY']-this['element']['offsetTop'];},this['stop']=()=>{this['isFollowing']=![];},this['follow']=_0x33219e=>{if(!this['isFollowing'])return;const _0x1be297=_0x33219e['clientX']-this['diffX'],_0x5e6e84=_0x33219e['clientY']-this['diffY'];this['element']['style']['left']=_0x1be297+'px',this['element']['style']['top']=_0x5e6e84+'px';},this['element']=document['createElement']('div'),this['element']['id']=_0x5b2d71,this['element']['classList']['add']('pop-panel');const _0x3d91c8=document['createElement']('div');_0x3d91c8['classList']['add']('pop-panel-header'),_0x3d91c8['append'](_0x345834),this['element']['appendChild'](_0x3d91c8),this['header']=_0x3d91c8;const _0x4d6362=document['createElement']('div');_0x4d6362['classList']['add']('pop-panel-body'),this['element']['appendChild'](_0x4d6362),this['body']=_0x4d6362,_0x3d91c8['addEventListener']('mousedown',this['start']),_0x3d91c8['addEventListener']('mouseup',this['stop']),document['body']['addEventListener']('mousemove',this['follow']),this['container']['appendChild'](this['element']);}['destroy'](){document['body']['removeEventListener']('mousemove',this['follow']),this['element']['removeEventListener']('mousedown',this['start']),this['element']['removeEventListener']('mouseup',this['stop']),this['element']['remove']();}}

var css_248z = ".follow-tooltip{background:rgba(25,25,25,.3);border-radius:2px;color:hsla(0,0%,100%,.8);font-size:12px;left:-500px;padding:6px;position:absolute;z-index:99999999}";
styleInject(css_248z);

class Tooltip{constructor(_0x2a3f7c,_0x5990ee,_0x12afe3){this['follow']=_0x1ea36c=>{this['node']['style']['left']=_0x1ea36c['offsetX']+0xf+'px',this['node']['style']['top']=_0x1ea36c['offsetY']-0x1e+'px';},this['show']=()=>this['node']['hasAttribute']('hidden')&&this['node']['removeAttribute']('hidden'),this['hide']=()=>!this['node']['hasAttribute']('hidden')&&this['node']['setAttribute']('hidden',''),this['destroy']=()=>{this['target']?this['target']['removeEventListener']('mousemove',this['follow']):document['removeEventListener']('mousemove',this['follow']),this['parentNode']['removeChild'](this['node']);},this['node']=document['createElement']('div'),this['node']['id']=_0x2a3f7c,_0x5990ee&&this['node']['append'](_0x5990ee),this['childNode']=document['createElement']('div'),this['target']=_0x12afe3===null||_0x12afe3===void 0x0?void 0x0:_0x12afe3['target'],this['parentNode']=(_0x12afe3===null||_0x12afe3===void 0x0?void 0x0:_0x12afe3['parentNode'])||document['body'],(_0x12afe3===null||_0x12afe3===void 0x0?void 0x0:_0x12afe3['followPointer'])&&(this['node']['classList']['add']('follow-tooltip'),this['target']?this['target']['addEventListener']('mousemove',this['follow']):document['addEventListener']('mousemove',this['follow'])),this['parentNode']['appendChild'](this['node']),!(_0x12afe3===null||_0x12afe3===void 0x0?void 0x0:_0x12afe3['showOnCreate'])&&this['node']['setAttribute']('hidden','');}['setContent'](_0x4733cd){this['node']['textContent']&&(this['node']['textContent']=null);for(let _0x58566d=0x0;_0x58566d<this['node']['children']['length'];++_0x58566d){const _0x4467d5=this['node']['children'][_0x58566d];this['node']['removeChild'](_0x4467d5);}this['node']['append'](_0x4733cd),this['node']['appendChild'](this['childNode']);}['updateChildContent'](_0x175ea9){this['childNode']['textContent']&&(this['childNode']['textContent']=null);for(let _0x53ae00=0x0;_0x53ae00<this['node']['children']['length'];++_0x53ae00){const _0x162a87=this['node']['children'][_0x53ae00];this['node']['removeChild'](_0x162a87);}this['childNode']['append'](_0x175ea9);}}

export { BasePanel, PopPanel, Tooltip };
